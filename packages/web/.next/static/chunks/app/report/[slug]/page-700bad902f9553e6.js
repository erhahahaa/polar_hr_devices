(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[729],{4316:function(e,l,a){Promise.resolve().then(a.bind(a,8732))},8732:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return p}});var i=a(9501);function t(e){return(0,i.jsx)("button",{className:"duration-300 transition-all px-4 py-2 rounded-md dark:bg-gray-700 dark:hover:bg-gray-600 bg-gray-100 hover:bg-gray-200",...e})}var d=a(39),s=a(390),n=a(2376),r=a(1827),o=a(7675);function c(e){let{data:l,average:a,max:t}=e;return(0,i.jsxs)("div",{className:"dark:bg-gray-950 p-8 rounded-lg shadow",children:[(0,i.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-2xl font-semibold inline",children:"Denyut Jantung"}),(0,i.jsx)("span",{className:"ml-2 text-sm text-gray-400",children:"(bpm)"})]}),(0,i.jsx)("div",{children:(0,i.jsxs)(s.v,{children:[(0,i.jsx)(s.v.Button,{className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-gray-700 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"..."}),(0,i.jsxs)(s.v.Items,{className:"absolute overflow-hidden -ml-[12rem] w-56 mt-2 origin-top-right bg-gray-800 divide-y divide-gray-700 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none flex flex-col",children:[(0,i.jsx)(s.v.Item,{children:e=>{let{active:l}=e;return(0,i.jsx)("a",{className:"".concat(l&&"bg-blue-500"," px-4 py-2"),href:"/account-settings",children:"Unduh dalam csv"})}}),(0,i.jsx)(s.v.Item,{children:e=>{let{active:l}=e;return(0,i.jsx)("a",{className:"".concat(l&&"bg-blue-500"," px-4 py-2"),href:"/account-settings",children:"Lihat raw data utuh"})}})]})]})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 my-8",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"font-thin text-gray-300",children:"Rata - Rata"}),(0,i.jsx)("div",{className:"font-semibold text-xl",children:a})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"font-thin text-gray-300",children:"Maksimum"}),(0,i.jsx)("div",{className:"font-semibold text-xl",children:t})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)(n.x1,{data:l,options:{plugins:{legend:{display:!0}},elements:{line:{tension:0,borderWidth:2,borderColor:"rgba(240, 88, 68, 1)",fill:"start",backgroundColor:"rgba(240, 88, 68, 0.3)"},point:{radius:0,hitRadius:0}},scales:{xAxis:{display:!1}}}})})]})}function v(e){let{data:l,average:a,max:t}=e;return(0,i.jsxs)("div",{className:"dark:bg-gray-950 p-8 rounded-lg shadow",children:[(0,i.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,i.jsx)("div",{children:(0,i.jsx)("h4",{className:"text-2xl font-semibold inline",children:"ECG"})}),(0,i.jsx)("div",{children:(0,i.jsxs)(s.v,{children:[(0,i.jsx)(s.v.Button,{className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-gray-700 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"..."}),(0,i.jsxs)(s.v.Items,{className:"absolute overflow-hidden -ml-[12rem] w-56 mt-2 origin-top-right bg-gray-800 divide-y divide-gray-700 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none flex flex-col",children:[(0,i.jsx)(s.v.Item,{children:e=>{let{active:l}=e;return(0,i.jsx)("a",{className:"".concat(l&&"bg-blue-500"," px-4 py-2"),href:"/account-settings",children:"Unduh dalam csv"})}}),(0,i.jsx)(s.v.Item,{children:e=>{let{active:l}=e;return(0,i.jsx)("a",{className:"".concat(l&&"bg-blue-500"," px-4 py-2"),href:"/account-settings",children:"Lihat raw data utuh"})}})]})]})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 my-8",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"font-thin text-gray-300",children:"Rata - Rata"}),(0,i.jsx)("div",{className:"font-semibold text-xl",children:a})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"font-thin text-gray-300",children:"Maksimum"}),(0,i.jsx)("div",{className:"font-semibold text-xl",children:t})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)(n.x1,{data:l,options:{plugins:{legend:{display:!0}},elements:{line:{tension:0,borderWidth:2,borderColor:"rgba(68, 88, 240, 1)",fill:"start",backgroundColor:"rgba(68, 88, 240, 0.3)"},point:{radius:0,hitRadius:0}},scales:{xAxis:{display:!1}}}})})]})}function x(e){var l,a,t,d,s,r,x,u,m;let{reports:f}=function(e){let l=(0,o.useMemo)(()=>{let l=(null==e?void 0:e.report)||{},a=[{type:"hr",evaluate:e=>{let a=(a=>{var i,t;let d={labels:[],datasets:[]},s=-1;for(let a of(null==e?void 0:e.data)||[]){let e=(null===(i=null==l?void 0:l.devices.find(e=>(null==e?void 0:e.identifier)===(null==a?void 0:a.device)))||void 0===i?void 0:i.name)||"",t="".concat(e," (").concat(null==a?void 0:a.device,")"),n=d.datasets.find(e=>e.label===t);for(let e of(n||d.datasets.push({label:t,data:[]}),(null==a?void 0:a.value)||[])){let l=parseInt(e[0]||0);l>s&&(s=l)}}for(let a of(d.labels=Array.from(Array(s+1).keys())||[],(null==e?void 0:e.data)||[])){let e=(null===(t=null==l?void 0:l.devices.find(e=>(null==e?void 0:e.identifier)===(null==a?void 0:a.device)))||void 0===t?void 0:t.name)||"",i="".concat(e," (").concat(null==a?void 0:a.device,")"),s=d.datasets.find(e=>e.label===i);if(s)for(let e of(null==a?void 0:a.value)||[]){let l=e[0],a=e[1];s.data[l]=a?parseInt(a):0}}return d})(0);return{data:a,average:(e=>{let l=0,a=0;for(let i of(null==e?void 0:e.datasets)||[])for(let e of(null==i?void 0:i.data)||[])l+=e?parseInt(e):0,e&&(a+=1);return Math.round(l/a)})(a),max:(e=>{let l=-1;for(let a of(null==e?void 0:e.datasets)||[])for(let e of(null==a?void 0:a.data)||[])e>l&&(l=e);return l})(a)}}},{type:"ecg",evaluate:e=>{let a=(a=>{var i,t;let d={labels:[],datasets:[]},s=-1;for(let a of(null==e?void 0:e.data)||[]){let e=(null===(i=null==l?void 0:l.devices.find(e=>(null==e?void 0:e.identifier)===(null==a?void 0:a.device)))||void 0===i?void 0:i.name)||"",t="".concat(e," (").concat(null==a?void 0:a.device,")"),n=d.datasets.find(e=>e.label===t);for(let e of(n||d.datasets.push({label:t,data:[]}),(null==a?void 0:a.value)||[])){let l=e[0]||0;e[1],l>s&&(s=l)}}for(let a of(d.labels=Array.from(Array(s+1).keys())||[],(null==e?void 0:e.data)||[])){let e=(null===(t=null==l?void 0:l.devices.find(e=>(null==e?void 0:e.identifier)===(null==a?void 0:a.device)))||void 0===t?void 0:t.name)||"",i="".concat(e," (").concat(null==a?void 0:a.device,")"),s=d.datasets.find(e=>e.label===i);if(s)for(let e of(null==a?void 0:a.value)||[]){let l=e[0],a=e[1];s.data[l]=a}}return d})(0);return{data:a,average:(e=>{let l=0,a=0;for(let i of(null==e?void 0:e.datasets)||[])for(let e of(null==i?void 0:i.data)||[])l+=e?parseInt(e):0,e&&(a+=1);return Math.round(l/a)})(a),max:(e=>{let l=-1;for(let a of(null==e?void 0:e.datasets)||[])for(let e of(null==a?void 0:a.data)||[])e>l&&(l=e);return l})(a)}}}],i=[];for(let e of(null==l?void 0:l.reports)||[]){let l=a.find(l=>l.type===(null==e?void 0:e.type));l&&i.push({type:null==e?void 0:e.type,data:l.evaluate(e)})}return i},[e]);return{reports:l}}(e.data);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"max-w-screen-lg w-full mx-auto py-14 pt-6 flex flex-col space-y-10",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-2xl font-semibold mb-3",children:"Pintas"}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[f.find(e=>"hr"===e.type)&&(0,i.jsxs)("div",{className:"rounded shadow py-4 px-4 container overflow-hidden flex dark:bg-orange-400",children:[(0,i.jsxs)("div",{className:"flex flex-col w-1/2 item justify-center",children:[(0,i.jsx)("div",{className:"text-xs text-gray-200",children:"Rata rata denyut jantung"}),(0,i.jsxs)("div",{className:"font-bold text-2xl",children:[null===(l=f.find(e=>"hr"===e.type))||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.average," bpm"]})]}),(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)(n.x1,{data:null===(t=f.find(e=>"hr"===e.type))||void 0===t?void 0:t.data.data,options:{plugins:{legend:{display:!1}},elements:{line:{tension:0,borderWidth:2,borderColor:"rgba(47, 97, 68, 1)",fill:"start",backgroundColor:"rgba(47, 97, 68, 0.3)"},point:{radius:0,hitRadius:0}},scales:{xAxis:{display:!1},yAxis:{display:!1},x:{display:!1},y:{display:!1}}}})})]}),f.find(e=>"ecg"===e.type)&&(0,i.jsxs)("div",{className:"rounded shadow py-4 px-4 container overflow-hidden flex dark:bg-blue-400",children:[(0,i.jsxs)("div",{className:"flex flex-col w-1/2 item justify-center",children:[(0,i.jsx)("div",{className:"text-xs text-gray-200",children:"Rata rata ECG"}),(0,i.jsxs)("div",{className:"font-bold text-2xl",children:[null===(d=f.find(e=>"ecg"===e.type))||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.average," volt"]})]}),(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)(n.x1,{data:null===(r=f.find(e=>"ecg"===e.type))||void 0===r?void 0:r.data.data,options:{plugins:{legend:{display:!1}},elements:{line:{tension:0,borderWidth:2,borderColor:"rgba(47, 97, 68, 1)",fill:"start",backgroundColor:"rgba(47, 97, 68, 0.3)"},point:{radius:0,hitRadius:0}},scales:{xAxis:{display:!1},yAxis:{display:!1},x:{display:!1},y:{display:!1}}}})})]})]})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Detail"}),(0,i.jsx)("div",{className:"flex flex-col space-y-6",children:f.map(e=>{var l,a,t,d,s,n;return(0,i.jsxs)(o.Fragment,{children:[(null==e?void 0:e.type)==="hr"&&(0,i.jsx)(c,{data:null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.data,average:null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.average,max:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.max}),(null==e?void 0:e.type)==="ecg"&&(0,i.jsx)(v,{data:null==e?void 0:null===(d=e.data)||void 0===d?void 0:d.data,average:null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.average,max:null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.max})]},Math.random())})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-2xl font-semibold mb-3",children:"Alat yang terhubung"}),(0,i.jsx)("div",{className:"grid grid-cols-4 gap-4",children:null===(x=e.data)||void 0===x?void 0:null===(u=x.report)||void 0===u?void 0:null===(m=u.devices)||void 0===m?void 0:m.map(e=>(0,i.jsxs)("div",{className:"rounded shadow container overflow-hidden flex items-center dark:bg-slate-900",children:[(0,i.jsx)("div",{className:"w-14 h-14 relative overflow-hidden bg-red-500"}),(0,i.jsxs)("div",{className:"flex-1 ml-4",children:[(0,i.jsx)("div",{className:"text-lg font-semibold",children:null==e?void 0:e.name}),(0,i.jsx)("div",{className:"text-xs italic text-gray-200",children:null==e?void 0:e.identifier})]})]},(null==e?void 0:e.identifier)||Math.random()))})]})]})})}r.kL.register(r.uw);var u=a(7934),m=a.n(u),f=a(6559),h=a.n(f);async function g(e){let l=await fetch("".concat("http://localhost:3000","/api/report/").concat(e),{cache:"no-cache"});if(!l.ok)throw Error("Failed to fetch data");return await l.json()}async function p(e){var l,a,s;let{params:n}=e,r=await g(n.slug);m().unix(null==r?void 0:null===(l=r.report)||void 0===l?void 0:l.startTime);let o=()=>{var e,l;navigator.clipboard.writeText(window.location.href),console.log(null==r?void 0:null===(e=r.report)||void 0===e?void 0:e.startTime,m().unix(null==r?void 0:null===(l=r.report)||void 0===l?void 0:l.startTime).format("DD MMMM YYYY")),alert("Link copied to clipboard")};return(0,i.jsxs)("main",{className:"flex-1",children:[(0,i.jsx)("div",{className:"shadow border-b-2 border-white/[0.2] dark:bg-gray-950/[0.7]",children:(0,i.jsxs)("div",{className:"flex flex-col max-w-screen-lg w-full mx-auto py-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("h2",{className:"font-semibold text-2xl",children:null==r?void 0:null===(a=r.exercise)||void 0===a?void 0:a.name}),(0,i.jsx)("div",{children:(0,i.jsx)(t,{onClick:()=>o(),children:"Share"})})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsxs)("div",{className:"text-xs text-gray-500 flex",children:[(0,i.jsx)(d.XdU,{}),(0,i.jsx)("span",{className:"ml-1",children:null==r?void 0:null===(s=r.report)||void 0===s?void 0:s.startTime})]}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[(0,i.jsx)(d.qyc,{}),(0,i.jsx)("span",{className:"ml-1",children:"17:39"})]}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[(0,i.jsx)(d.m9R,{}),(0,i.jsx)("span",{className:"ml-1",children:"viandwi24"})]})]})]})}),(0,i.jsx)(x,{data:r})]})}m().extend(h())}},function(e){e.O(0,[515,674,812,528,159,744],function(){return e(e.s=4316)}),_N_E=e.O()}]);