(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[783],{1501:function(e,a,n){Promise.resolve().then(n.bind(n,7778))},7778:function(e,a,n){"use strict";n.r(a),n.d(a,{DashboardCompanySection:function(){return p}});var t=n(9433),l=n(1927),s=n(1844),o=n(4963),i=n.n(o),c=n(1945),r=n(1010),d=n(8415);async function u(e){let a=await fetch("".concat("http://localhost:3000","/api/company/create-by-me"),{cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!a.ok)throw Error("Failed to fetch data");return await a.json()}async function x(e){let a=await fetch("".concat("http://localhost:3000","/api/auth/company-linked"),{cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!a.ok)throw Error("Failed to fetch data");return await a.json()}async function h(e,a){let n=await fetch("".concat("http://localhost:3000","/api/company"),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(a)});if(!n.ok)throw Error("Failed to fetch data");return await n.json()}async function m(e,a){let n="".concat("http://localhost:3000","/api/company/").concat(a,"/link"),t=await fetch(n,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch data");return await t.json()}function p(){let{data:e,status:a,update:n}=(0,s.useSession)(),[o,p]=(0,d.useState)([]),[f,v]=(0,d.useState)(),[y,j]=(0,d.useState)(!1),[g,N]=(0,d.useState)({name:"",description:"",address:""}),b=(0,d.useCallback)(()=>{u(null==e?void 0:e.user.token).then(e=>{p((null==e?void 0:e.companies)||[])}),x(null==e?void 0:e.user.token).then(e=>{v((null==e?void 0:e.company)||void 0)})},[e]);(0,d.useEffect)(()=>{var a;e&&(null==e?void 0:e.user)&&(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.token)&&b()},[e,b]);let C=(0,d.useCallback)(async()=>{var a;let n=null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.token;await h(n,g),b(),j(!1)},[e,g,b]),[w,k]=(0,d.useState)(!1),[T,F]=(0,d.useState)({id:""}),S=(0,d.useCallback)(async()=>{var a;let n=null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.token;await m(n,T.id),b(),k(!1)},[e,T,b]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Zb.Wrapper,{className:"flex flex-col mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(l.Zb.HeaderTitle,{children:"Linked Company"}),(0,t.jsx)("div",{children:(0,t.jsx)(l.zx,{onClick:()=>k(!0),className:"text-xs px-2 py-1",children:"Join"})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[f&&(null==f?void 0:f.name)&&(0,t.jsxs)("div",{children:['Your account is linked to "',null==f?void 0:f.name,'" Company.']}),!(f&&(null==f?void 0:f.name))&&(0,t.jsx)("span",{className:"text-gray-500",children:'Your account doesnt linked to any company, click "Join" to start link.'})]})]}),(0,t.jsxs)(l.Zb.Wrapper,{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(l.Zb.HeaderTitle,{children:"Company Management"}),(0,t.jsx)("div",{children:(0,t.jsx)(l.zx,{onClick:()=>j(!0),className:"text-xs px-2 py-1",children:"Create"})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[o.map((e,a)=>{var n;return(0,t.jsxs)(i(),{href:"/dashboard/company/".concat(e._id),className:"flex flex-col border border-gray-700 px-4 py-2 rounded hover:bg-gray-700 cursor-pointer",children:[(0,t.jsx)("div",{className:"text-sm",children:null==e?void 0:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-100",children:null==e?void 0:null===(n=e.meta)||void 0===n?void 0:n.description})]},a)}),0===o.length&&(0,t.jsx)("div",{className:"text-gray-500",children:"No company found to your manage, create new company if you want manage a company."})]})]}),(0,t.jsx)(c.u,{show:y,as:d.Fragment,children:(0,t.jsxs)(r.V,{onClose:()=>j(!1),children:[(0,t.jsx)(c.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)("div",{className:"fixed inset-0 bg-black/75","aria-hidden":"true"})}),(0,t.jsx)(c.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,t.jsx)("div",{className:"fixed inset-0 w-screen overflow-y-auto",children:(0,t.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,t.jsxs)(r.V.Panel,{className:"mx-auto max-w-lg w-full rounded-lg bg-gray-950 px-12 py-8",children:[(0,t.jsx)(r.V.Title,{className:"text-xl font-semibold mb-4",children:"Create new company"}),(0,t.jsxs)("div",{className:"flex flex-col w-full mb-6 gap-4",children:[(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)(l.II.Text,{type:"text",placeholder:"Company Name",value:g.name,onChange:e=>N(a=>({...a,name:e.target.value}))})}),(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)(l.II.Text,{type:"text",placeholder:"Description",value:g.description,onChange:e=>N(a=>({...a,description:e.target.value}))})}),(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)(l.II.Text,{type:"text",placeholder:"Address",value:g.address,onChange:e=>N(a=>({...a,address:e.target.value}))})})]}),(0,t.jsxs)("div",{className:"mt-4 flex justify-end gap-4",children:[(0,t.jsx)(l.zx,{onClick:()=>C(),children:"Create"}),(0,t.jsx)(l.zx,{onClick:()=>j(!1),children:"Cancel"})]})]})})})})]})}),(0,t.jsx)(c.u,{show:w,as:d.Fragment,children:(0,t.jsxs)(r.V,{onClose:()=>k(!1),children:[(0,t.jsx)(c.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)("div",{className:"fixed inset-0 bg-black/75","aria-hidden":"true"})}),(0,t.jsx)(c.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,t.jsx)("div",{className:"fixed inset-0 w-screen overflow-y-auto",children:(0,t.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,t.jsxs)(r.V.Panel,{className:"mx-auto max-w-lg w-full rounded-lg bg-gray-950 px-12 py-8",children:[(0,t.jsx)(r.V.Title,{className:"text-xl font-semibold mb-4",children:"Join to company"}),(0,t.jsx)("div",{className:"flex flex-col w-full mb-6 gap-4",children:(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)(l.II.Text,{type:"text",placeholder:"Company Id",value:T.id,onChange:e=>F(a=>({...a,id:e.target.value}))})})}),(0,t.jsxs)("div",{className:"mt-4 flex justify-end gap-4",children:[(0,t.jsx)(l.zx,{onClick:()=>S(),children:"Join"}),(0,t.jsx)(l.zx,{onClick:()=>k(!1),children:"Cancel"})]})]})})})})]})})]})}},1927:function(e,a,n){"use strict";n.d(a,{zx:function(){return r},Zb:function(){return s},II:function(){return o}});var t,l,s,o,i=n(9433);function c(e,a){let n={...e};return a.forEach(e=>{delete n[e]}),n}function r(e){var a;return(0,i.jsx)("button",{className:"duration-300 transition-all px-4 py-2 rounded-md dark:bg-gray-700 dark:hover:bg-gray-600 bg-gray-100 hover:bg-gray-200 ".concat(null!==(a=e.className)&&void 0!==a?a:""),...c(e,["className"])})}(t=s||(s={})).Wrapper=function(e){return(0,i.jsx)("div",{className:"bg-transparent rounded-lg shadow-lg p-6 border-2 border-gray-800 ".concat(null==e?void 0:e.className),...c(e,["className"])})},t.HeaderTitle=function(e){return(0,i.jsx)("div",{className:"text-xl font-bold mb-4",children:null==e?void 0:e.children})},(l=o||(o={})).Text=function(e){return(0,i.jsx)("input",{type:"text",className:"flex-1 px-4 py-2 rounded-lg",...e})},l.Select=function(e){return(0,i.jsx)("select",{className:"flex-1 px-4 py-2 rounded-lg",...e,children:e.data.map((e,a)=>(0,i.jsx)("option",{value:e.value,children:e.text},a))})}}},function(e){e.O(0,[844,816,839,526,488,744],function(){return e(e.s=1501)}),_N_E=e.O()}]);