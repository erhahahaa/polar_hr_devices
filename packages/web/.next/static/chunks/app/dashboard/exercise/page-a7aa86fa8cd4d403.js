(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{6452:function(e,l,n){Promise.resolve().then(n.bind(n,4709))},4709:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return g}});var a=n(9433),t=n(8415),r=n(1844),s=n(9688),o=n.n(s),i=n(3638),c=n.n(i),d=n(4963),u=n.n(d),x=n(1927),h=n(1945),v=n(1010),f=n(6346);async function m(e){let l=await fetch("".concat("http://localhost:3000","/api/report/share"),{cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!l.ok)throw Error("Failed to fetch data");return await l.json()}async function p(e){let l=await fetch("".concat("http://localhost:3000","/api/session"),{cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!l.ok)throw Error("Failed to fetch data");return await l.json()}async function j(e,l){let n=await (0,f.Z)({method:"POST",url:"".concat("http://localhost:3000","/api/report/share"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},data:{emailUserToAllow:null!=l?l:""}});return n.data}function g(){let{data:e,status:l}=(0,r.useSession)(),[n,s]=(0,t.useState)([]),[i,c]=(0,t.useState)([]),[d,f]=(0,t.useState)(!1),[g,y]=(0,t.useState)(""),N=async l=>{var n,a;let t=await j(null==e?void 0:null===(n=e.user)||void 0===n?void 0:n.token,l);alert(null==t?void 0:t.message),m(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.token).then(e=>{c((null==e?void 0:e.lists)||[]),console.log("res",e)}).catch(e=>console.log("err",e))};return((0,t.useEffect)(()=>{var l,n,a;e&&(null==e?void 0:e.user)&&(null==e?void 0:null===(l=e.user)||void 0===l?void 0:l.token)&&(p(null==e?void 0:null===(n=e.user)||void 0===n?void 0:n.token).then(e=>{s((null==e?void 0:e.sessions)||[]),console.log("res",e)}).catch(e=>console.log("err",e)),m(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.token).then(e=>{c((null==e?void 0:e.lists)||[]),console.log("res",e)}).catch(e=>console.log("err",e)))},[e]),"loading"===l)?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.Zb.Wrapper,{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(x.Zb.HeaderTitle,{children:"My Exercises"}),(0,a.jsx)("div",{children:(0,a.jsx)(x.zx,{onClick:()=>f(!0),className:"text-xs px-2 py-1",children:"Share"})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[n.map((e,l)=>(0,a.jsxs)(u(),{href:"/dashboard/report/".concat(null==e?void 0:e._id),className:"flex flex-col border border-gray-700 px-4 py-2 rounded hover:bg-gray-700 cursor-pointer",children:[(0,a.jsx)("div",{className:"text-sm",children:null==e?void 0:e._id}),(0,a.jsx)("div",{className:"text-xs text-gray-100",children:o().utc(null==e?void 0:e.start_time).local().format("DD MMMM YYYY HH:mm:ss")})]},l)),0===n.length&&(0,a.jsx)("div",{children:"No session found."})]})]}),(0,a.jsx)(h.u,{show:d,as:t.Fragment,children:(0,a.jsxs)(v.V,{onClose:()=>f(!1),children:[(0,a.jsx)(h.u.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/75","aria-hidden":"true"})}),(0,a.jsx)(h.u.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsx)("div",{className:"fixed inset-0 w-screen overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,a.jsxs)(v.V.Panel,{className:"mx-auto max-w-lg w-full rounded-lg bg-gray-950 px-12 py-8",children:[(0,a.jsx)(v.V.Title,{className:"text-xl font-semibold mb-4",children:"Share Your Exercise"}),(0,a.jsxs)("div",{className:"flex w-full mb-6 gap-4",children:[(0,a.jsx)(x.II.Text,{type:"email",placeholder:"User email to invite",value:g,onChange:e=>y(e.target.value)}),(0,a.jsx)(x.zx,{onClick:()=>N(g),children:"Invite"})]}),(0,a.jsx)(v.V.Title,{className:"text-xl font-semibold mb-4",children:"User Shared"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[i.map((e,l)=>{var n,t,r;return(0,a.jsx)("button",{className:"w-full flex flex-col border border-gray-700 px-4 py-2 rounded hover:bg-gray-700 cursor-pointer",children:(0,a.jsxs)("div",{className:"text-sm flex w-full justify-between",children:[(0,a.jsxs)("div",{children:[null==e?void 0:null===(n=e.userView)||void 0===n?void 0:n.firstName," ",null==e?void 0:null===(t=e.userView)||void 0===t?void 0:t.lastName]}),(0,a.jsx)("div",{className:"text-gray-400",children:null==e?void 0:null===(r=e.userView)||void 0===r?void 0:r.email})]})},l)}),0===i.length&&(0,a.jsx)("div",{children:"No shared user found."})]}),(0,a.jsx)("div",{className:"mt-4 flex justify-end",children:(0,a.jsx)(x.zx,{onClick:()=>f(!1),children:"Ok"})})]})})})})]})})]})}o().extend(c())},1927:function(e,l,n){"use strict";n.d(l,{zx:function(){return c},Zb:function(){return r},II:function(){return s}});var a,t,r,s,o=n(9433);function i(e,l){let n={...e};return l.forEach(e=>{delete n[e]}),n}function c(e){var l;return(0,o.jsx)("button",{className:"duration-300 transition-all px-4 py-2 rounded-md dark:bg-gray-700 dark:hover:bg-gray-600 bg-gray-100 hover:bg-gray-200 ".concat(null!==(l=e.className)&&void 0!==l?l:""),...i(e,["className"])})}(a=r||(r={})).Wrapper=function(e){return(0,o.jsx)("div",{className:"bg-transparent rounded-lg shadow-lg p-6 border-2 border-gray-800 ".concat(null==e?void 0:e.className),...i(e,["className"])})},a.HeaderTitle=function(e){return(0,o.jsx)("div",{className:"text-xl font-bold mb-4",children:null==e?void 0:e.children})},(t=s||(s={})).Text=function(e){return(0,o.jsx)("input",{type:"text",className:"flex-1 px-4 py-2 rounded-lg",...e})},t.Select=function(e){return(0,o.jsx)("select",{className:"flex-1 px-4 py-2 rounded-lg",...e,children:e.data.map((e,l)=>(0,o.jsx)("option",{value:e.value,children:e.text},l))})}}},function(e){e.O(0,[844,816,839,263,526,488,744],function(){return e(e.s=6452)}),_N_E=e.O()}]);